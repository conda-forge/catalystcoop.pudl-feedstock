{% set name = "catalystcoop.pudl" %}
{% set pypi_normalized_name = "catalystcoop_pudl" %}
{% set version = "2025.12.1" %}
{% set python_min = "3.13" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://files.pythonhosted.org/packages/source/{{ name[0] }}/{{ pypi_normalized_name }}/{{ pypi_normalized_name }}-{{ version }}.tar.gz
  sha256: 0c5715114ab03b0e4f64a534b953accfa00aabb66ad396b5b22cff6ef6c061d8
build:
  noarch: python
  number: 0
  script: {{ PYTHON }} -m pip install . -vv
  entry_points:
    - dbt_helper = pudl.scripts.dbt_helper:dbt_helper
    - ferc_to_sqlite = pudl.ferc_to_sqlite.cli:main
    - metadata_to_rst = pudl.convert.metadata_to_rst:metadata_to_rst
    - pudl_check_fks = pudl.etl.check_foreign_keys:pudl_check_fks
    - pudl_datastore = pudl.workspace.datastore:pudl_datastore
    - pudl_etl = pudl.etl.cli:pudl_etl
    - pudl_null_cols = pudl.scripts.pudl_null_cols:main
    - pudl_service_territories = pudl.analysis.service_territory:pudl_service_territories
    - resource_description = pudl.scripts.resource_description:main
    - zenodo_data_release = pudl.scripts.zenodo_data_release:pudl_zenodo_data_release

requirements:
  host:
    - python {{ python_min }}
    - pip
    - setuptools
    - setuptools_scm
  run:
    - python >={{ python_min }},<3.14
    - alembic ==1.17.2
    - boto3 ==1.40.70
    - bottleneck ==1.6.0
    - catalystcoop.dbfread ==3.0.0
    - catalystcoop.ferc_xbrl_extractor ==1.7.3
    - click ==8.1.8
    - coloredlogs ==14.0
    - conda-lock ==3.0.4
    - coverage ==7.13.0
    - dagster ==1.12.4
    - dagster-dbt ==1!0.28.4
    - dagster-postgres ==1!0.28.4
    - dbt-core ==1.10.15
    - dbt-duckdb ==1.9.4
    - deepdiff ==8.6.1
    - doc8 ==2.0.0
    - email_validator ==2.3.0
    - frictionless ==5.18.1
    - fsspec ==2025.10.0
    - furo ==2024.8.6
    - gcsfs ==2025.10.0
    - gdal ==3.12.0
    - geoarrow-pyarrow ==0.3.1
    - geopandas ==1.1.1
    - grpcio ==1.73.1
    - grpcio-health-checking ==1.73.1
    - grpcio-status ==1.73.1
    - hypothesis ==6.148.7
    - jellyfish ==1.2.1
    - jinja2 ==3.1.6
    - jupyter ==1.1.1
    - matplotlib-base ==3.10.8
    - mlflow ==3.7.0
    - nbconvert ==7.16.6
    - nbformat ==5.10.4
    - networkx ==3.6
    - numba ==0.62.1
    - numexpr ==2.14.1
    - numpy ==2.3.5
    - packaging ==25.0
    - pandas ==2.3.3
    - pandera-core ==0.27.0
    - pillow ==11.3.0
    - polars ==1.35.2
    - pre-commit ==4.5.0
    - pyarrow ==20.0.0
    - pydantic ==2.12.5
    - pydantic-settings ==2.12.0
    - pytest ==9.0.2
    - pytest-console-scripts ==1.4.1
    - pytest-cov ==7.0.0
    - pytest-mock ==3.15.1
    - pytest-order ==1.3.0
    - pytest-xdist ==3.8.0
    - python-build ==1.3.0
    - python-calamine ==0.6.1
    - python-dotenv ==1.2.1
    - python-duckdb ==1.4.2
    - pytz ==2025.2
    - pyyaml ==6.0.3
    - readthedocs-sphinx-ext ==2.2.5
    - requests ==2.32.5
    - responses ==0.25.8
    - ruff ==0.14.8
    - s3fs ==2025.10.0
    - scikit-learn ==1.7.2
    - scipy ==1.16.3
    - shapely ==2.1.2
    - sphinx ==8.2.3
    - sphinx-autoapi ==3.6.1
    - sphinx-issues ==5.0.1
    - sphinx-reredirects ==1.0.0
    - sphinx-tabs ==3.4.1
    - sphinxcontrib-bibtex ==2.6.5
    - sphinxcontrib-googleanalytics ==0.5
    - splink ==4.0.11
    - sqlalchemy ==2.0.44
    - sqlglot ==28.0.0
    - sqlite ==3.51.1
    - timezonefinder ==8.1.0
    - typos ==1.40.0
    - universal_pathlib ==0.3.7
    - urllib3 ==2.5.0
    - xlsxwriter ==3.2.9

test:
  requires:
    - python {{ python_min }}
  imports:
    - pudl
  commands:
    - dbt_helper --help > /dev/null
    - ferc_to_sqlite --help > /dev/null
    - metadata_to_rst --help > /dev/null
    - pudl_check_fks --help > /dev/null
    - pudl_datastore --help > /dev/null
    - pudl_etl --help > /dev/null
    - pudl_null_cols --help > /dev/null
    - pudl_service_territories --help > /dev/null
    - resource_description --help > /dev/null
    - zenodo_data_release --help > /dev/null

about:
  home: https://catalyst.coop/pudl
  license: MIT
  license_family: MIT
  license_file: LICENSE.txt
  summary: An open data processing pipeline for public US utility data.

  description: |
    The PUDL (Public Utility Data Liberation) project extracts electric
    utility data from US government sources, standardizes it, and integrates
    it for easier use by researchers, activists, journalists, and others
    working in the public interest. It includes data from EIA forms 860 and
    923, FERC form 1, EPA CEMS hourly, and other sources.

  doc_url: https://catalystcoop-pudl.readthedocs.io/
  dev_url: https://github.com/catalyst-cooperative/pudl

extra:
  recipe-maintainers:
    - zaneselvans
    - zschira
    - jdangerx
